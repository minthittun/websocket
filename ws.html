<h1>
    Web Socket
</h1>

<button onclick="testSend()">Test</button>
<div id="result"></div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    //var ws = new WebSocket('ws://localhost:40510');
    var HOST = location.origin.replace(/^http/, 'ws')
    var ws = new WebSocket(HOST);

    $(function () {

        $("#result").empty();

        ws.onopen = function () {
            ws.send('connected')
        }
        ws.onmessage = function (evt) {
            var received_msg = evt.data;

            $("#result").append("<div>" + received_msg+"</div>");
        };

    });

    function testSend()
    {
        ws.send("test data");
    }

</script>